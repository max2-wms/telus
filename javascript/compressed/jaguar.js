var JAG={currentPage:null,highlight:{border:"thin solid red"},lang:$("html").attr("lang"),phones:null,cities:cities,formEntriesValid:!0,init:function(){var e=this;return e.setupCurrentPage().showVariants().attachEvents().setupPagination().ellipsis().setupDueNow().setupInputMasks(),"corporate_settings"===e.currentPage&&e.setupTabs(),e},setupCurrentPage:function(){var e=this;return e.currentPage=$("html").attr("data-currentpage"),e},setupTabs:function(){var e=this;return $("#tab-container").easytabs({animate:!1}),e},attachEvents:function(){var e=this;return $(".menu").dropit(),$(".slider").slick({vertical:!0}),$(".datepicker").datepicker(),$("#myModal").on("shown.bs.modal",function(){$("#myInput").focus()}),$('a[href="#"]').click(function(e){e.preventDefault()}),e.stickyFooter(),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()}),$(".toggle_panel").click(function(){var e=$(this),s=e.attr("data-section"),t=e.closest(".outer-container").find(".advanced_search_table"),a=t.find("input"),i=(t.find(".frg-button"),!1);a.each(function(){var e=$(this);e.val().length>0&&(i=!0)}),s=void 0===s?".advanced_search_table":"."+s,e.hasClass("icon-plus-inverted")?e.closest(".advanced_search").find(".icon-plus-inverted").removeClass("icon-plus-inverted").addClass("icon-minus-inverted"):e.hasClass("icon-minus-inverted")&&e.closest(".advanced_search").find(".icon-minus-inverted").removeClass("icon-minus-inverted").addClass("icon-plus-inverted"),$(s).hasClass("open")?$(s).addClass("hide").addClass("closed").removeClass("open"):$(s).hasClass("closed")&&$(s).removeClass("hide").removeClass("closed").addClass("open")}),$(".js-show_list").click(function(){var e=$(this),s=e.text(),t=e.closest("tr").index(),t=parseInt(t)+2;switch(s){case"View list":s="Hide list",e.closest("tbody").find("tr:nth-child( "+t+" )").removeClass("hide").find("div").removeClass("hide"),$(".js-hide_subscribers_list").click(function(){var e=$(this),s=e.closest("tr").index(),s=parseInt(s);$(this).closest(".subscriber_list").addClass("hide").closest("tr").addClass("hide"),e.closest("tbody").find("tr:nth-child( "+s+" )").find(".js-show_list").text("View list")});break;case"Hide list":s="View list",e.closest("tbody").find("tr:nth-child( "+t+" )").addClass("hide").find("div").addClass("hide")}e.text(s)}),$(".btn_group .btn").click(function(){var e=$(this),s=e.closest(".btn_group").find(".btn");s.removeClass("current"),e.addClass("current")}),$(".js-sort").click(function(){var s=$(this),t=s.closest("div").find(".js-sort.frg-icon"),a=null,i=t.attr("data-field");t.addClass("holdup"),$(".js-sort.frg-icon").not(".holdup").removeClass("icon-arrow-up").addClass("icon-arrow-down"),t.hasClass("icon-arrow-down")?(t.removeClass("icon-arrow-down").removeClass("holdup").addClass("icon-arrow-up"),a=-1):t.hasClass("icon-arrow-up")&&(t.removeClass("icon-arrow-up").removeClass("holdup").addClass("icon-arrow-down"),a=1),e.sortTable(i,a)}),e.setupFilters(),$(".js-sort-by").change(function(){var e=$(this).val();$("nav.filter_nav").addClass("hide"),$("nav.filter_nav."+e).removeClass("hide")}),$(".browse_files .frg-input-field, .browse_files .frg-button").click(function(){e.getFile()}),$(".js-view_more").click(function(){var e=$(this),s=e.closest("div").find("ul");e.hasClass("closed")?(s.show("slow"),e.removeClass("closed").addClass("open").find(".text").text("Hide all").closest(".js-view_more").find(".frg-icon").addClass("icon-minus-circled").removeClass("icon-plus-circled")):e.hasClass("open")&&(s.hide("slow"),e.removeClass("open").addClass("closed").find(".text").text("View all").closest(".js-view_more").find(".frg-icon").addClass("icon-plus-circled").removeClass("icon-minus-circled"))}),$(".port select").change(function(){var e=$(this),s=e.closest("tr"),t=s.find(".account_nbr").find(".empty"),a=s.find(".account_nbr").find("input"),i=s.find(".existing_phone_nbr").find(".empty"),n=s.find(".existing_phone_nbr").find(".status"),r=s.find(".js-calling-city").find(".empty"),l=s.find(".js-calling-city").find("input"),d=s.find(".js-preferred-area-code").find(".empty"),o=s.find(".js-preferred-area-code").find(".frg-select-container");"yes"===e.val()?($(".account_nbr").removeClass("hide"),$(".existing_phone_nbr").removeClass("hide"),t.addClass("hide"),i.addClass("hide"),a.removeClass("hide"),n.removeClass("hide"),r.removeClass("hide"),l.addClass("hide"),d.removeClass("hide"),o.addClass("hide")):"no"===e.val()&&(t.removeClass("hide"),i.removeClass("hide"),a.addClass("hide"),n.addClass("hide"),r.addClass("hide"),l.removeClass("hide"),d.addClass("hide"),o.removeClass("hide"))}),$(".sim select").change(function(){var s=$(this),t=s.closest("tr").find(".sim_nbr").find(".empty"),a=s.closest("tr").find(".sim_nbr").find(".frg-select-container, .status");"0"===s.val()?($(".sim_nbr").removeClass("hide"),t.addClass("hide"),a.removeClass("hide")):(t.removeClass("hide"),a.addClass("hide")),e.setupDueNow()}),$(".frg-checkbox").click(function(){var e=$(this),s=e.find(".icon .frg-icon");s.hasClass("icon-checkmark")?s.removeClass("icon-checkmark"):s.addClass("icon-checkmark")}),$(".edit_name").click(function(){var e=$(this),s=e.closest("p"),t=s.find(".group_name_container"),a=s.find("input");e.addClass("hide"),t.addClass("hide"),a.removeClass("hide").focus()}),$(".js-auto_save").keypress(function(s){var t=$(this),a=t.val(),i=t.closest("p"),n=i.find(".group_name_container"),r=i.find(".edit_name"),l=i.find(".group_name"),d=s.which||s.keyCode;13!=d&&9!=d||""===a||(t.addClass("hide"),r.removeClass("hide"),l.text(a),n.removeClass("hide")),e.ellipsis()}).blur(function(s){var t=$(this),a=t.val(),i=t.closest("p"),n=i.find(".group_name_container"),r=i.find(".edit_name"),l=i.find(".group_name"),d=s.which||s.keyCode;13!=d&&9!=d||""===a||(t.addClass("hide"),r.removeClass("hide"),l.text(a),n.removeClass("hide")),e.ellipsis()}),$(".plan .select").click(function(){var s=$(this),t=($(".plan"),$(".plan .frg-button.select")),a=s.closest(".plan"),i=a.find(".frg-button.select"),n=a.find("input[name=price_per_month]").val(),r=$(".monthly"),l=$("input[name=nbr_device]").val(),d=n*l;t.removeClass("current").text("Select"),i.addClass("current").text("Selected"),d=e.currencyFormat(d),r.text(d.substring(0,d.indexOf(".")))}),$(".service .select").click(function(){var e=$(this),s="Add service",t="Remove service";e.hasClass("current")?(e.removeClass("current"),e.is("input")?e.val(s):e.text(s)):(e.addClass("current"),e.is("input")?e.val(t):e.text(t))}),$(".advanced_option").change(function(){var e=$(this),s=e.val();"import"===s&&$("#myModal").modal()}),$(".js-previous").click(function(){var s=$(this),t=$(".current.page"),a=$(".current.page").prev(),i=$(".view_all");a.is("table")&&(i.addClass("hide"),a.length>0&&(t.removeClass("current").addClass("hide"),a.removeClass("hide").addClass("current")),a.prev().is("table")||s.text(" - "),e.setupPagination())}),$(".js-next").click(function(){var s=($(this),$(".current.page")),t=$(".current.page + .page"),a=$(".view_all"),i=$(".js-previous");t.is("table")&&(a.addClass("hide"),i.text("Previous 10"),t.length>0&&(s.removeClass("current").addClass("hide"),t.removeClass("hide").addClass("current")),e.setupPagination())}),$(".js-view_all").click(function(){var s=$(".page"),t=$(".page.current");if(0===t.length&&(t=$(".current")),t.is("table")){var a=$(".view_all"),i=s.find("tbody tr").clone();s.addClass("hide").removeClass("current"),a.removeClass("hide").addClass("current").find("tbody").html(i)}else s.removeClass("current").removeClass("hide");e.setupPagination()}),$(".js-phone_nbr").blur(function(){var e=$(this),s=e.closest(".input_error_tooltip"),t=!1;t||s.addClass("error")}),$(".js-quantity").keyup(function(){var e=$(this),s=e.val(),t=e.attr("data-num")||null,a=e.closest(".status"),i=a.closest(".accessory").find(".frg-button"),n=a.closest("section").closest("div").find(".frg-button.color-green"),r=parseInt(a.find(".js-max_quantity").val()),l=null!==t?$("span.status[data-num="+t+"]"):$("span.status");if($.isNumeric(s))if(s>r){var d=0===r?"sorry, this item is not available at the moment":"The quantity you are trying to order is on back order. Please try reducing the quantity until the indicator changes to available";a.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text(d),i.addClass("state-disabled"),n.addClass("state-disabled"),l.removeClass("positive").addClass("negative").text("Back order")}else a.removeClass("negative").addClass("positive"),i.removeClass("state-disabled"),i.hasClass("added")?i.text("Update"):i.text("Add to cart"),n.removeClass("state-disabled").text("Add to cart"),l.removeClass("negative").addClass("positive").text("Available");else i.addClass("state-disabled"),n.addClass("state-disabled"),""!==s?(l.removeClass("positive").addClass("negative").text("Invalid entry"),a.removeClass("positive").addClass("negative").find(".tooltip_bubble span").text("please, enter a valid number")):0!==r&&(a.removeClass("negative").addClass("positive"),l.text(""))}),$(".js-validate_number").keyup(function(){var e=$(this),s=e.val(),t=e.closest(".status"),a=t.find(".tooltip_bubble span");""===s||$.isNumeric(s)?t.removeClass("negative").addClass("positive"):(t.removeClass("positive").addClass("negative"),a.text("Please, enter a valid number"))}),$(".js-form-complete").keyup(function(){e.formCompleted()}).click(function(){e.formCompleted()}),$(".existing_phone_nbr .js-phone_input_mask").blur(function(){var s=$(this);e.portabilityCheck()?s.closest(".status").removeClass("negative").addClass("positive"):s.closest(".status").removeClass("positive").addClass("negative")}),$(".js-cities-auto-complete").keyup(function(){var s=$(this),t=s.val(),a=[],i=s.parent().find(".js-auto-complete-results");if(t.length>=3)for(var n=0;n<e.cities.length;n++)-1!==e.cities[n].value.toLowerCase().indexOf(t)&&a.push(e.cities[n]);if(i.text(""),a.length>0){i.removeClass("hide");for(var n=0;n<a.length;n++)i.append('<a class="block js-auto-complete-result" data-areacodes="'+a[n].data+'" href="#">'+a[n].value+"</a>")}else i.addClass("hide");$(".js-auto-complete-result").click(function(e){var s=$(this),t=s.parent(),a=t.parent().find(".js-cities-auto-complete"),i=s.closest("tr").find(".js-area-codes"),n=s.attr("data-areacodes");e.preventDefault(),t.text("").addClass("hide"),a.val(s.text().toLowerCase()),n=n.split(","),i.text("");for(var r=0;r<n.length;r++)i.append('<option value="'+n[r]+'">'+n[r]+"</option>")})}),$(".js-cities-auto-complete").blur(function(){var s=$(this);e.callingCityCheck(s)||s.val("")}),$(".advanced_search_table input, .advanced_search_table select").keyup(function(){e.validateSearchForm()}).change(function(){e.validateSearchForm()}),$(".js-loading").click(function(){var e=$(".js-loaded-content"),s=$(".js-loading-spinner");e.addClass("hide"),s.removeClass("hide"),setTimeout(function(){e.removeClass("hide"),s.addClass("hide")},5e3)}),$(".upgrades_subscriber input[type=checkbox]").click(function(){var e=$(".operations .frg-button"),s=$("input[type=checkbox]"),t=!1;s.each(function(){var e=$(this);e.is(":checked")&&(t=!0)}),t?e.removeClass("state-disabled"):e.addClass("state-disabled")}),$(".js-phone_input_mask").keyup(function(){var e=($(this),$(".js-validated_options"));-1===$(this).val().indexOf("_")?e.removeClass("state-disabled"):e.addClass("state-disabled")}),$(".js-upgrade-offer").change(function(){var e=$(this),s=e.closest("tr").find(".status");"select"!==e.val().toLowerCase()?"complete"!==s.text().toLowerCase()&&s.text("Pending device & plan"):"complete"!==s.text().toLowerCase()&&s.text("Pending upgrade offer")}),$(".js-filter-service-category").change(function(){var e=$(this).val(),s=$(".phone");"select"===e.toLowerCase()?s.each(function(){$(this).closest(".js-element").removeClass("hide")}):s.each(function(){var s=$(this),t=s.closest(".js-element"),a=s.attr("data-filter");-1!==a.indexOf(e)?t.removeClass("hide"):t.addClass("hide")})}),$(".js-not-empty").blur(function(){var s=$(this);""===s.val()?(s.closest(".status").removeClass("positive").addClass("negative").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(s.closest(".status").removeClass("negative").addClass("positive").find(".frg-icon").removeClass("icon-warning-inverted").addClass("icon-checkmark-inverted"),e.formEntriesValid=!0)}),$(".js-email_validation").blur(function(){var s=$(this);e.validateEmail(s.val())?(s.closest(".status").removeClass("negative").addClass("positive"),s.closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0):(s.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("Please, enter a valid email address"),s.closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1)}),$(".js-match-validation").blur(function(){var s=$(".js-match-validation"),t=$("input[name=email2]");""!==$(s[0]).val()&&""!==$(s[1]).val()&&($(s[0]).val()!==$(s[1]).val()?(t.closest(".status").removeClass("positive").addClass("negative").find(".tooltip_bubble").text("The emails you entered do not match.").closest(".status").find(".frg-icon").removeClass("icon-checkmark-inverted").addClass("icon-warning-inverted"),e.formEntriesValid=!1):(t.closest(".status").removeClass("negative").addClass("positive").closest(".status").find(".frg-icon").addClass("icon-checkmark-inverted").removeClass("icon-warning-inverted"),e.formEntriesValid=!0))}),$(".js-required").keyup(function(s){e.checkRequiredField(s)}).change(function(s){e.checkRequiredField(s)}),$(".js-more").click(function(){var e=$(".dep_accounts");e.append('<div class="row lenght70 top_margin20"><div class="col-xs-6"><label class="block devil_gray_text">DEP number</label><input class="frg-input-field full_width" /></div><div class="col-xs-6"><label class="block devil_gray_text">Description</label><input class="frg-input-field full_width" /></div></div>')}),$(".js-display-overlay").click(function(){e.displayOverlay($(this))}),$(".frg-checkbox.js-pricepoint").click(function(){var e=$(this),s=$(".js-hide-not-device-only"),t=$(".js-show-not-device-only"),a=$(".changeling"),i=s.find(".js-required");e.hasClass("js-device-only")?(s.hide(),t.removeClass("hide"),a.removeClass("halfwidth").addClass("full_width"),i.removeClass("js-required").addClass("js-required-hold")):(s.show(),t.addClass("hide"),a.removeClass("full_width").addClass("halfwidth"),i.addClass("js-required").removeClass("js-required-hold"))}),e},checkRequiredField:function(e){var s=this,t=$(e.target).closest(".js-all-required-fields"),a=t.find(".js-required"),i=t.find(".js-submit"),n=!0,r=t.find("input[type=radio].js-required"),l=!(r.length>0);return a.each(function(){var e=$(this);r.each(function(){$(this).is(":checked")&&(l=!0)}),""===e.val()||"select"===e.val().toLowerCase()||-1!==e.val().indexOf("_")?n=!1:e.hasClass("js-quantity")&&e.parent().hasClass("status")&&e.parent().hasClass("negative")&&(n=!1)}),n&&l&&s.formEntriesValid?i.removeClass("state-disabled"):i.addClass("state-disabled"),s},validateSearchForm:function(){var e=$(".advanced_search_table input, .advanced_search_table select"),s=$(".advanced_search_table .status"),t=$(".advanced_search_table .frg-button"),a=!1;e.each(function(){""!==$(this).val()&&"Select"!==$(this).val()&&(a=!0)}),s.each(function(){$(this).hasClass("negative")&&(a=!1)}),a?t.removeClass("state-disabled"):t.addClass("state-disabled")},portabilityCheck:function(){return!1},callingCityCheck:function(e){for(var s=this,t=e.val(),a=0;a<s.cities.length;a++)if(t.toLowerCase()===s.cities[a].value.toLowerCase())return!0;return!1},autoSave:function(e){var s=$(this),t=s.val(),a=s.closest("p"),i=a.find(".edit_name"),n=a.find("span, strong"),r=e.which||e.keyCode;13!=r&&9!=r||""===t||(s.addClass("hide"),i.removeClass("hide"),n.text(t).removeClass("hide"))},formCompleted:function(){var e=$(".js-form-complete"),s=!0,t=!1,a=$(".frg-button");e.each(function(){var e=$(this);"text"===e.attr("type")&&(""!==e.val()&&-1===e.val().indexOf("_")||(s=!1)),"radio"===e.attr("type")&&e.is(":checked")&&(t=!0)}),s||t?a.removeClass("state-disabled"):a.addClass("state-disabled")},setupFilters:function(){var e=this;$(".js-filter").click(function(){var s=$(this),t=$("nav ul li .js-filter"),a=$(".js-applied_filter");s.hasClass("btn")||(t.removeClass("current"),s.addClass("current"));var i=$("nav ul li .js-filter.current"),n=i.attr("data-filter"),r=i.attr("data-specific-spelling"),l=void 0!==r?r:e.capitalizeFirstLetter(n.replace("_"," ")),d=$(".js-filter.btn.current"),o=1===d.length?d.attr("data-filter"):null,c=$(".object");"plans"===e.currentPage||"devices"===e.currentPage?c.closest(".js-element").show():c.show(),a.text(l),c.each(function(){var s=$(this);"all"===n?null!==o&&-1!==s.attr("data-filter").indexOf(o)?"plans"===e.currentPage||"devices"===e.currentPage?s.closest(".js-element").show():s.show():null!==o&&-1===s.attr("data-filter").indexOf(o)?"plans"===e.currentPage||"devices"===e.currentPage?s.closest(".js-element").hide():s.hide():null===o&&("plans"===e.currentPage||"devices"===e.currentPage?s.closest(".js-element").show():s.show()):(-1===s.attr("data-filter").indexOf(n)||null!==o&&-1===s.attr("data-filter").indexOf(o))&&("plans"===e.currentPage||"devices"===e.currentPage?s.closest(".js-element").hide():s.hide())}),"accessories"===e.currentPage&&e.rearrangeSeparators()})},getFile:function(){$(".upfile").click()},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},rearrangeSeparators:function(){$(".object").removeClass("separator").addClass("separator"),$(".object:visible:first").removeClass("separator"),$(".object:visible").each(function(e){e%3===0&&$(this).removeClass("separator")})},sortTable:function(e,s){var t,a,i,n,r=document.getElementById("sortable"),l=r.rows,d=l.length,o=new Array;for(t=0;d>t;t++)for(i=l[t].cells,n=i.length,o[t]=new Array,a=0;n>a;a++)o[t][a]=i[a].innerHTML;for(o.sort(function(t,a){return t[e]==a[e]?0:t[e]>a[e]?s:-1*s}),t=0;d>t;t++)l[t].innerHTML="<td>"+o[t].join("</td><td>")+"</td>"},displayErrorMessage:function(e,s,t){var a=$(".error_message_container"),i=null;switch(e){case"error":case"warning":i="icon-warning-inverted"}a.append('<div class="error_message '+e+' clearfix"><a class="close right" href="#"><span>Close</span> <span class="frg-icon icon-x-circled"></span></a><div class="content clearfix"><div class="frg-icon '+i+' left"></div><div class="text left"><div class="h3 title"><strong>'+s+'</strong></div><span class="text">'+t+"</span></div></div></div>"),$(".error_message .close").click(function(){$(this).closest(".error_message").fadeOut()})},showFakeLinks:function(){var e=this;return $('a[href="#"]').css(e.highlight),e},stickyFooter:function(){function e(){s=a.height(),footerTopInt=$(window).scrollTop()+$(window).height()-s,t=footerTopInt+"px";footerTopInt<i?a.addClass("sticky"):a.removeClass("sticky")}var s=0,t=0,a=$(".stickyFooter"),i=a.length?a[0].offsetTop:null;null!==i&&e(),$(window).scroll(e).resize(e)},getPhones:function(){var e=this;return"devices"===e.currentPage&&$.ajax({url:"http://www.telus.com/services/cms/page/"+e.lang+"/bc/mobility/devices"}).done(function(s){e.phones=s.devices,$.each(e.phones,function(s,t){var a="";a+='<div class="box phone object clearfix left" data-filter="all voice_only">',a+='	<div class="image left">',a+='		<a href="device.php">';for(var s=0;s<t.variants.length;s++){var i=0===s?"":" hide";a+='			<img class="js-'+t.variants[s].id+i+'" src="'+t.variants[s].image_url+'" alt="'+t.variants[s].color_name+'" />'}a+="		</a>",a+='		<div class="device__variant-container">';for(var s=0;s<t.variants.length;s++)a+='			<button class="device-color-button device__variant-item" data-lang="en" data-sku="'+t.variants[s].id+'" aria-label="'+t.variants[s].color_name+'">',a+='				<span class="frg-icon icon-circle-solid" style="color: '+t.variants[s].color_hex+'"></span>',a+="			</button>";a+="		</div>",a+="	</div>",a+='	<div class="description right">',a+='		<div class="name">',a+="			<div>",a+='				<h6><a href="device.php">'+t.name+"</a></h6>",a+="			</div>",a+='			<div class="status positive">Available</div>',a+="		</div>",a+='		<div class="prices">',a+='			<div class="no-term left">',a+="				<h4>$200</h4>",a+='				<span class="time_period">No term</span>',a+="			</div>",a+='			<div class="long-term right">',a+="				<h4>$50</h4>",a+='				<span class="time_period">3-year term</span>',a+="			</div>",a+='			<div class="clear"></div>',a+="		</div>",a+='		<div class="mtm">',a+='			<div class="gray_text">$230 Monthly</div>',a+='			<a class="frg-button" href="device.php">Select</a>',a+="		</div>",a+="	</div>",a+='	<div class="clear"></div>',a+="</div>",$(".phones").append(a),e.showVariants()})}),e},showVariants:function(){var e=this;return $(".device-color-button").click(function(){var e=$(this),s=e.attr("data-sku"),t=e.closest(".image, .object"),a=t.find(".js-"+s),i=t.find("img");i.addClass("hide"),a.removeClass("hide")}),e},setupPagination:function(){var e=this,s=$(".paging_display"),t=s.find(".from"),a=s.find(".to"),i=$(".js-next"),n=null,r=s.find(".total"),l=$(".page"),d=l.find("tbody tr"),o=$(".page.current");return 0===o.length&&(o=$(".view_all.current")),t.text(parseInt(o.attr("data-from"))+1),a.text(parseInt(o.attr("data-from"))+o.find("tbody tr").length),r.text(d.length),n=parseInt(r.text())-parseInt(a.text())>10?10:parseInt(r.text())-parseInt(a.text()),n>0?i.text("Next "+n):i.text(" - "),e},ellipsis:function(){var e=this,s=$(".js-ellipsis");return s.each(function(){var e=$(this),s=e.attr("data-maxlen");e.text().trim().length>s&&e.text(e.text().trim().substr(0,parseInt(s)-3)+"...")}),e},setupDueNow:function(){var e=this,s=parseInt($("[name=base_total]").val()),t=$(".sim select"),a=0,i=$("p.now");return t.each(function(){a+=parseInt($(this).val())}),$.isNumeric(s)&&$.isNumeric(a)&&i.text(e.currencyFormat(s+a)),e},currencyFormat:function(e){return"$"+parseFloat(e,10).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,").toString()},validateEmail:function(e){var s=/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;return s.test(e)},setupInputMasks:function(){var e=this;return $.mask.definitions["~"]="[+-]",$(".js-phone_input_mask").mask("(999) 999-9999"),$(".js-postalcode_input_mask").mask("a9a 9a9"),e},displayOverlay:function(e){var s=this;return $.LoadingOverlay("show"),setTimeout(function(){$.LoadingOverlay("hide");var s=e.closest(".bottom_section"),t=s.find(".js-quantity").val();$.isNumeric(t)&&t>0?e.addClass("current").addClass("added").text("Update"):$.isNumeric(t)&&0==t&&e.removeClass("current").removeClass("added").text("Add to cart")},3e3),s}};